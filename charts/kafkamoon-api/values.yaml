kafkamoon:
  api:
    port: 8080
    image: matheuscruzdev/kafkamoon-api:v0.1.0
  docs:
    port: 3000
    image: docker.io/matheuscruzdev/kafkamoon-docs:main
  certificates:
    api: "arn:aws:acm:us-east-1:555411961606:certificate/8f35a4d9-799b-4fe4-8304-476c5d525542"
    docs: "arn:aws:acm:us-east-1:555411961606:certificate/415c1e7e-25aa-4994-b65f-5e4189920014"

# grafana operator
grafana-operator:
  enabled: true
  grafana:
    service:
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-backend-protocol: http
        service.beta.kubernetes.io/aws-load-balancer-tls-cert: "arn:aws:acm:us-east-1:555411961606:certificate/18bf1ea5-991b-435d-919b-8de8f88feed6"
        service.beta.kubernetes.io/aws-load-balancer-tls-ports: "https"
      extraPorts: 
        - port: 443
          name: "https"
          targetPort: 3000
      type: "LoadBalancer"
  commonLabels:
    dashboards: "grafana"

# bitnami/kafka configuration
kafka:
  enabled: true
  extraConfigs:
    deleteTopicEnable: true
    autoCreateTopicsEnable: false 
  volumePermissions:
    enabled: true
  controller:
    replicaCount: 2
  listeners:
    client:
      protocol: PLAINTEXT
    controller:
      protocol: PLAINTEXT
    interbroker:
      protocol: PLAINTEXT
  metrics:
    jmx:
      enabled: true

prometheus:
  enabled: true
  alertmanager:
    service:
      type: "ClusterIP"
  server:
    configuration: |
      scrape_configs:
        - job_name: 'kafkamoon-api-metrics'
          metrics_path: '/actuator/prometheus'
          scrape_interval: 5s
          static_configs:
            - targets:  ['kafkamoon-api.default.svc.cluster.local:80']
              labels: 
                application: 'kafkamoon-api'
        - job_name: 'kafkamoon-kafka-jmx'
          metrics_path: '/metrics'
          scrape_interval: 5s
          static_configs:
            - targets: ['kafkamoon-jmx-metrics.default.svc.cluster.local:5556']
              labels:
                application: 'kafka-jmx'
hazelcast:
  enabled: true
  installCRDs: true
  serviceName: hazelcast
